-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public."Estado"
(
    uf character varying[] NOT NULL,
    nome character varying[] NOT NULL,
    PRIMARY KEY (uf)
);

CREATE TABLE IF NOT EXISTS public."Município"
(
    "idMunicipio" character varying[] NOT NULL,
    uf character varying[] NOT NULL,
    nome character varying[] NOT NULL,
    "tipoCapital" character varying[] NOT NULL,
    PRIMARY KEY ("idMunicipio")
);

CREATE TABLE IF NOT EXISTS public."Escola"
(
    "idEscola" character varying[] NOT NULL,
    "idMunicipio" character varying[] NOT NULL,
    nome character varying[] NOT NULL,
    "tipoCapital" character varying[] NOT NULL,
    PRIMARY KEY ("idEscola")
);

CREATE TABLE IF NOT EXISTS public."IndicadoresAlunos"
(
    "idIndicadoresAlunos" integer NOT NULL,
    "qtdAlunosInse" integer NOT NULL,
    "anoMedicao" integer NOT NULL,
    "idEscola" character varying[] NOT NULL,
    PRIMARY KEY ("idIndicadoresAlunos")
);

CREATE TABLE IF NOT EXISTS public."ClassificacaoSocioEconomica"
(
    "idClassificacaoSE" integer NOT NULL,
    "qtdQuartos" integer NOT NULL,
    "qtdCelulares" integer NOT NULL,
    "qtdGeladeiras" integer NOT NULL,
    "qtdTelevisores" integer NOT NULL,
    "qtdBanheiros" integer NOT NULL,
    "idEscolaridadePais" integer NOT NULL,
    PRIMARY KEY ("idClassificacaoSE")
);

CREATE TABLE IF NOT EXISTS public."NivelEscolariade"
(
    "idEscolaridadePais" integer NOT NULL,
    escolaridade character varying[] NOT NULL,
    PRIMARY KEY ("idEscolaridadePais")
);

CREATE TABLE IF NOT EXISTS public."PorcentagemClassificacaoAlunos"
(
    "idPorcentagem" integer NOT NULL,
    "idIndicadoresAlunos" integer NOT NULL,
    "idClassificacaoSE" integer NOT NULL,
    "porcentagemAlunos" double precision NOT NULL,
    PRIMARY KEY ("idPorcentagem")
);

CREATE TABLE IF NOT EXISTS public."TaxasAprovacao"
(
    "idTaxasAprovacao" integer NOT NULL,
    "idEscola" character varying[] NOT NULL,
    "anoMedicao" integer NOT NULL,
    total double precision NOT NULL,
    PRIMARY KEY ("idTaxasAprovacao")
);

CREATE TABLE IF NOT EXISTS public."NotaIDEB"
(
    "idIdeb" integer NOT NULL,
    "idEscola" character varying[] NOT NULL,
    "notaIdeb" double precision,
    "anoMedicao" integer NOT NULL,
    PRIMARY KEY ("idIdeb")
);

CREATE TABLE IF NOT EXISTS public."NotaSAEB"
(
    "idSaeb" integer NOT NULL,
    "idEscola" character varying[] NOT NULL,
    "notaMatematica" double precision,
    "notaLinguaPort" double precision,
    "notaPadronizada" double precision,
    "anoMedicao" integer NOT NULL,
    PRIMARY KEY ("idSaeb")
);

CREATE TABLE IF NOT EXISTS public."AprovacaoSerie"
(
    "idAprovacaoSerie" integer NOT NULL,
    serie integer NOT NULL,
    porcentagem double precision NOT NULL,
    "idTaxasAprovacao" integer NOT NULL,
    PRIMARY KEY ("idAprovacaoSerie")
);

ALTER TABLE IF EXISTS public."Município"
    ADD FOREIGN KEY (uf)
    REFERENCES public."Estado" (uf) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Escola"
    ADD CONSTRAINT "idMunicipio" FOREIGN KEY ("idMunicipio")
    REFERENCES public."Município" ("idMunicipio") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."IndicadoresAlunos"
    ADD CONSTRAINT "idEscola" FOREIGN KEY ("idEscola")
    REFERENCES public."Escola" ("idEscola") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."ClassificacaoSocioEconomica"
    ADD CONSTRAINT "idEscolaridadePais" FOREIGN KEY ("idEscolaridadePais")
    REFERENCES public."NivelEscolariade" ("idEscolaridadePais") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."PorcentagemClassificacaoAlunos"
    ADD CONSTRAINT "idClassificacaoSE" FOREIGN KEY ("idClassificacaoSE")
    REFERENCES public."ClassificacaoSocioEconomica" ("idClassificacaoSE") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."PorcentagemClassificacaoAlunos"
    ADD CONSTRAINT "idIndicadoresAlunos" FOREIGN KEY ("idIndicadoresAlunos")
    REFERENCES public."IndicadoresAlunos" ("idIndicadoresAlunos") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."TaxasAprovacao"
    ADD CONSTRAINT "idEscola" FOREIGN KEY ("idEscola")
    REFERENCES public."Escola" ("idEscola") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."NotaIDEB"
    ADD CONSTRAINT "idEscola" FOREIGN KEY ("idEscola")
    REFERENCES public."Escola" ("idEscola") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."NotaSAEB"
    ADD CONSTRAINT "idEscola" FOREIGN KEY ("idEscola")
    REFERENCES public."Escola" ("idEscola") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."AprovacaoSerie"
    ADD CONSTRAINT "idTaxasAprovacao" FOREIGN KEY ("idTaxasAprovacao")
    REFERENCES public."TaxasAprovacao" ("idTaxasAprovacao") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

END;