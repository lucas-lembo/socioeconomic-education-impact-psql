# MC536: Database Project - Analysis of Brazilian students' scores in the Basic Education Assessment System (Saeb) in correlation with their socioeconomic status

## Project Overview
This project was developed by
<br/>[Mateus Farha Ribeiro](https://github.com/mateusfarhaa)  (252678)
<br/>[Rafael Scalabrin Dosso](https://github.com/rafael-dosso)  (205237)
<br/>[Lucas Lembo de Lara](https://github.com/lucas-lembo)  (254467)

## Database Schema Overview

The initial phase of our project involved developing both the conceptual and relational models of our relational database (PostgreSQL).
This foundation enabled us to analyze the relationships between school SAEB scores, IDEB (Basic Education Development Index) scores,
students' socioeconomic levels, and the geographical locations of these schools (capital, interior, rural, urban).

**Figure 1: Conceptual Model (ER Diagram)**
<p align="center">
  <img src="./models/Conceptual_Model.png" alt="Conceptual Database Model ERD" width="700"/>
</p>

**Figure 2: Relational (Logical) Model**
<p align="center">
  <img src="./models/Relational_Model.png" alt="Relational Database Model" width="700"/>
</p>

*(The detailed Physical Model SQL script can be found [here](./models/Physical_model.sql)).*


## Table of Contents

- [Datasets](#datasets)
  - [Original Data](#original-data)
  - [Preprocessed Data](#preprocessed-data)
- [Setup and Usage](#setup-and-usage)
  - [Database Setup and Population](#database-setup-and-population)
- [Datasets Preprocessing](#datasets-preprocessing)
- [Analysis & Queries](#analysis--queries)
- [Results](#results)

## Datasets

### Original Data

The raw data was sourced from Inep (Instituto Nacional de Estudos e Pesquisas Educacionais Anísio Teixeira). The original files used for preprocessing are located in the `/datasets` directory:

*   `divulgacao_ensino_medio_escolas_2023.csv`: Contains data on school approval rates, Saeb scores, and Ideb scores for different years.
*   `INSE_2021_escolas.csv`: Contains data on the location of schools and the percentage of students in each socioeconomic classification at each level.

### Preprocessed Data

The original datasets were preprocessed (details in [`preprocessing.ipynb`](./preprocessing.ipynb)) to fit the designed database schema. The resulting cleaned CSV files, used for loading into the database, are located in the `/preprocessed_datasets` directory:

*   `desempenho_escolar.csv`
*   `indicadores_socio_economicos.csv`

### Database Setup and Population

1.  **Create Database:** Using pgAdmin4, create a new PostgreSQL database. The default name used in the script is `Projeto 1`.
    ```sql
    CREATE DATABASE "Projeto 1";
    ```
2.  **Configure Connection:** Update connection parameters at the file [`/scripts/populate_db.py`](./database_population.ipynb). **Update the `DB_PASS` variable** with your actual PostgreSQL password. Adjust other parameters (user, host, port, dbname) if necessary.

    ```python
    # --- Database Connection Parameters ---
    DB_NAME = "Projeto 1"
    DB_USER = "postgres"
    DB_HOST = "localhost"
    DB_PASS = "password" # <--- CHANGE THIS TO YOUR PASSWORD
    DB_PORT = "5432"
    ```

3.  **Populating Database:** To populate the database, run the populate_db script located in [`/scripts/populate_db.py`](./database_population.ipynb), and the dataset data will be inserted into the database tables.

## Datasets Preprocessing


## Analysis & Queries
1. Comparison of SAEB Performance Among Rural Schools Across All States:
In this query, we observe that states with lower socioeconomic indices tend to have the lowest scores in Portuguese and Mathematics, while states with higher socioeconomic indices achieve the highest scores. This suggests a clear correlation between students’ performance on the SAEB and their socioeconomic conditions.

## Results

The output generated by executing the queries are saved as CSV files in the `/sql-outputs` directory:

*   [`query_1_output.csv`](./sql-outputs/query_1_output.csv)
*   [`query_2_output.csv`](./sql-outputs/query_2_output.csv)
*   [`query_3_output.csv`](./sql-outputs/query_3_output.csv)
*   [`query_4_output.csv`](./sql-outputs/query_4_output.csv)
*   [`query_5_output.csv`](./sql-outputs/query_5_output.csv)
